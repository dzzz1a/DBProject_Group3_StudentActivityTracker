{% extends "base.html" %}
{% block content %}
<h2>Advisor Dashboard</h2>
<p class="text-muted mb-4">Manage incoming participation requests from students.</p>

<div class="ios-card p-0">
    <div class="table-responsive">
        <table class="table-custom">
            <thead>
                <tr>
                    <th>Student</th>
                    <th>Activity</th>
                    <th>Current Status</th>
                    <th>Feedback</th>
                    <th style="min-width: 250px;">Action</th>
                </tr>
            </thead>
            <tbody>
                {% for p in participations %}
                <tr>
                    <td class="fw-bold">{{ p.student.studentFirstName }} {{ p.student.studentLastName }}</td>
                    <td>{{ p.activity.activityName }}</td>
                    <td>
                        <span class="badge-ios {% if p.applicationStatus=='Pending' %}bg-pending{% elif p.applicationStatus=='Approved' %}bg-approved{% else %}bg-rejected{% endif %}">
                            {{ p.applicationStatus }}
                        </span>
                    </td>
                    <td>
                        <form action="{{ url_for('advisor.update_participation', id=p.participationID) }}" method="POST" class="d-flex gap-2">
                            <input type="text" name="feedback" class="form-control form-control-sm" value="{{ p.advisorFeedback or '' }}" placeholder="Reason...">
                    </td>
                    <td>
                            <select name="status" class="form-select form-select-sm w-auto">
                                <option value="Pending" {% if p.applicationStatus=='Pending' %}selected{% endif %}>Pending</option>
                                <option value="Approved" {% if p.applicationStatus=='Approved' %}selected{% endif %}>Approve</option>
                                <option value="Rejected" {% if p.applicationStatus=='Rejected' %}selected{% endif %}>Reject</option>
                            </select>
                            <button class="btn btn-primary btn-ios btn-sm">Save</button>
                        </form>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="5" class="text-center py-4 text-muted">No pending requests found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}