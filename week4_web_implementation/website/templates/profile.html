{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-center py-4">
    <div class="ios-card" style="width: 100%; max-width: 700px;">
        
        <div class="d-flex align-items-center gap-4 border-bottom pb-4 mb-4">
            <div class="position-relative">
                <div class="bg-primary bg-opacity-10 text-primary rounded-circle d-flex align-items-center justify-content-center" 
                     style="width: 80px; height: 80px; font-size: 2rem; font-weight: bold;">
                    {{ current_user.studentFirstName[0] if current_user.studentFirstName else 'U' }}
                </div>
                <div class="position-absolute bottom-0 end-0 bg-white rounded-circle shadow-sm p-1 border" style="width: 28px; height: 28px; display: grid; place-items: center;">
                    <i class="bi bi-pencil-fill" style="font-size: 10px; color: var(--text-muted);"></i>
                </div>
            </div>
            <div>
                <h2 class="mb-0">Edit Profile</h2>
                <p class="text-muted mb-0">Update your personal details and account security.</p>
            </div>
        </div>

        <form method="POST">
            <h5 class="mb-3 fw-bold text-dark">Personal Information</h5>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">First Name</label>
                    <input type="text" name="first_name" class="form-control"
                           value="{{ current_user.studentFirstName }}" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Last Name</label>
                    <input type="text" name="last_name" class="form-control"
                           value="{{ current_user.studentLastName }}" required>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Email Address</label>
                <input type="email" name="email" class="form-control"
                       value="{{ current_user.studentEmail }}" required>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Phone Number</label>
                    <input type="text" name="phone" class="form-control"
                           value="{{ current_user.phoneNumber or '' }}" placeholder="+62 812-3456-7890">
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Current Year</label>
                    <input type="number" name="year" class="form-control"
                           value="{{ current_user.studentYear or '' }}" placeholder="e.g. 2025">
                </div>
            </div>

            <div class="mb-4">
                <label class="form-label">Address</label>
                <input type="text" name="address" class="form-control"
                       value="{{ current_user.studentAddress or '' }}" placeholder="Jl. Jalan">
            </div>

            <hr class="border-light my-4">

            <h5 class="mb-3 fw-bold text-dark">Security</h5>
            <div class="mb-4">
                <label class="form-label">New Password</label>
                <div class="input-group">
                    <input type="password" name="password" class="form-control border-end-0" placeholder="Leave blank to keep current password">
                    <span class="input-group-text bg-white border-start-0 text-muted">
                        <i class="bi bi-lock"></i>
                    </span>
                </div>
                <div class="form-text">Only enter a password if you want to change it.</div>
            </div>

            <div class="d-flex justify-content-end gap-2">
                <a href="{{ url_for('views.dashboard') }}" class="btn btn-secondary btn-ios">Cancel</a>
                <button type="submit" class="btn btn-primary btn-ios px-4">Save Changes</button>
            </div>
        </form>
    </div>
</div>

{% endblock %}